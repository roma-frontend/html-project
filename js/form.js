document.addEventListener("DOMContentLoaded", function () { let e = document.getElementById("form"), t = e.querySelector('button[type="submit"]'), n = document.getElementById("loader"), l = document.getElementById("file"), o = !1, a = document.querySelectorAll(".form-group__input"); function s(e, t) { Toastify({ text: e, duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: t, borderRadius: "5px", padding: "15px 25px" } }).showToast() } a.forEach(function e(t) { t.addEventListener("focus", () => { let e = t.previousElementSibling; e.style.top = "-20px", e.style.transform = "translateY(-50%) scale(0.9)", e.style.color = "#fff", e.style.fontSize = "1rem" }), t.addEventListener("blur", () => { if ("" === t.value) { let e = t.previousElementSibling; e.style.top = "50%", e.style.transform = "translateY(-50%) scale(1)", e.style.color = "#272733", e.style.fontSize = "1.125rem" } }) }), l.addEventListener("change", function e() { if (l.files.length > 0) { let o = l.files[0]; if ("image/jpeg" === o.type && o.size <= 1048576) { t.disabled = !0, n.style.display = "flex"; let a = new FormData; a.append("file", o); let i = new XMLHttpRequest; i.open("POST", "https://jsonplaceholder.typicode.com/posts", !0), i.upload.onload = function () { t.disabled = !1, n.style.display = "none", s("Файл выбран", "linear-gradient(72deg, #17ae39, #5a5b3c)") }, i.send(a) } else { var d = "Допустим JPG формат не более 1 МБ."; s(d, "linear-gradient(174deg, #a41e69c2, #1f1d23f7)"), l.value = "" } } else t.disabled = !1, n.style.display = "none" }), e.addEventListener("submit", function l(s) { if (s.preventDefault(), o) return; o = !0, n.style.display = "none", t.disabled = !0, n.style.display = "flex"; let i = document.querySelector(".select-options__item.selected"), d = i ? i.getAttribute("data-value") : "choose", r = document.getElementById("email").value, p = document.getElementById("name").value, y = new FormData; y.append("type", d), y.append("email", r), y.append("name", p), fetch("https://jsonplaceholder.typicode.com/posts", { method: "POST", body: y }).then(e => e.json()).then(() => { t.disabled = !1, n.style.display = "none", Toastify({ text: "Отправлено", duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(72deg, #17ae39, #5a5b3c)", borderRadius: "5px", padding: "15px 25px" } }).showToast(), e.reset(), document.getElementById("email").value = "", document.getElementById("name").value = "", o = !1, t.disabled = !1, a.forEach(e => { let t = e.previousElementSibling; t.style.top = "50%", t.style.transform = "translateY(-50%) scale(1)", t.style.color = "#272733", t.style.fontSize = "1.125rem" }) }).catch(() => { o = !1, n.style.display = "none", t.disabled = !1, Toastify({ text: "Ошибка", duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(174deg, #a41e69c2, #1f1d23f7)", borderRadius: "5px", padding: "15px 25px" } }).showToast() }) }) });