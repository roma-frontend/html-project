document.addEventListener("DOMContentLoaded", function () { let e = document.getElementById("form"), t = e.querySelector('button[type="submit"]'), n = document.getElementById("loader"), d = document.getElementById("file"); d.addEventListener("change", function () { if (d.files.length > 0) { t.disabled = !0, n.style.display = "flex"; let e = new FormData; e.append("file", d.files[0]); let o = new XMLHttpRequest; o.open("POST", "https://jsonplaceholder.typicode.com/posts", !0), o.upload.onload = function () { t.disabled = !1, n.style.display = "none", Toastify({ text: "Файл выбран", duration: 3e3, newWindow: !0, close: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(72deg, #17ae39, #5a5b3c)", borderRadius: "5px", padding: "15px 25px" } }).showToast() }, o.send(e) } else t.disabled = !1, n.style.display = "none" }), e.addEventListener("submit", function (e) { e.preventDefault(), n.style.display = "none", t.disabled = !0, n.style.display = "flex"; let d = document.querySelector(".select-options__item.selected"), o = d ? d.getAttribute("data-value") : "choose", a = document.getElementById("email").value, s = document.getElementById("name").value, i = new FormData; i.append("type", o), i.append("email", a), i.append("name", s), fetch("https://jsonplaceholder.typicode.com/posts", { method: "POST", body: i }).then(e => e.json()).then(e => { t.disabled = !1, n.style.display = "none", Toastify({ text: "Отправлен", duration: 3e3, newWindow: !0, close: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(72deg, #17ae39, #5a5b3c)", borderRadius: "5px", padding: "15px 25px" } }).showToast() }).catch(e => { n.style.display = "none", t.disabled = !1, Toastify({ text: "Ошибка", duration: 3e3, newWindow: !0, close: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(174deg, #a41e69c2, #1f1d23f7)", borderRadius: "5px", padding: "15px 25px" } }).showToast() }) }) });