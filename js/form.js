document.addEventListener("DOMContentLoaded", function () { let e = document.getElementById("form"), t = e.querySelector('button[type="submit"]'), n = document.getElementById("loader"), l = document.getElementById("file"), a = !1, o = document.querySelectorAll(".form-group__input"); function i(e, t) { Toastify({ text: e, duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: t, borderRadius: "5px", padding: "15px 25px" } }).showToast() } function s(e) { i(e, "linear-gradient(174deg, #a41e69c2, #1f1d23f7)") } o.forEach(function e(t) { t.addEventListener("focus", () => { let e = t.previousElementSibling; e.style.top = "-20px", e.style.transform = "translateY(-50%) scale(0.9)", e.style.color = "#fff", e.style.fontSize = "1rem" }), t.addEventListener("blur", () => { if ("" === t.value) { let e = t.previousElementSibling; e.style.top = "50%", e.style.transform = "translateY(-50%) scale(1)", e.style.color = "#272733", e.style.fontSize = "1.125rem" } }) }), l.addEventListener("change", function e() { if (l.files.length > 0) { let n = l.files[0]; "image/jpeg" === n.type && n.size <= 1048576 ? (i("Файл выбран", "linear-gradient(28deg, #256468, #10101dd6)"), t.disabled = !1) : (s("Допустим JPG формат(1 МБ)"), l.value = "", t.disabled = !0) } else s("Пожалуйста, выберите файл."), t.disabled = !0 }), e.addEventListener("submit", function l(i) { if (i.preventDefault(), a) return; a = !0, n.style.display = "none", t.disabled = !0, n.style.display = "flex"; let s = document.querySelector(".select-options__item.selected"), d = s ? s.getAttribute("data-value") : "choose", r = document.getElementById("email").value, p = document.getElementById("name").value, u = new FormData; u.append("type", d), u.append("email", r), u.append("name", p), fetch("https://jsonplaceholder.typicode.com/posts", { method: "POST", body: u }).then(e => e.json()).then(() => { n.style.display = "none", Toastify({ text: "Отправлено", duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(28deg, #256468, #10101dd6)", borderRadius: "5px", padding: "15px 25px" } }).showToast(), e.reset(), document.getElementById("email").value = "", document.getElementById("name").value = "", a = !1, t.disabled = !1, o.forEach(e => { let t = e.previousElementSibling; t.style.top = "50%", t.style.transform = "translateY(-50%) scale(1)", t.style.color = "#272733", t.style.fontSize = "1.125rem" }) }).catch(() => { a = !1, n.style.display = "none", t.disabled = !1, Toastify({ text: "Ошибка", duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(174deg, #a41e69c2, #1f1d23f7)", borderRadius: "5px", padding: "15px 25px" } }).showToast() }) }) });