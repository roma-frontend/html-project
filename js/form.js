document.addEventListener("DOMContentLoaded", function () { let e = document.getElementById("select").querySelectorAll(".select-options__item"), t = ""; e.forEach(function (n) { n.addEventListener("click", function () { e.forEach(function (e) { e.classList.remove("selected") }), n.classList.add("selected"), t = n.getAttribute("data-value") }) }); let n = document.getElementById("form"), l = n.querySelector('button[type="submit"]'), i = document.getElementById("loader"), a = document.getElementById("file"), d = !1, s = document.querySelectorAll(".form-group__input"); function o(e, t) { Toastify({ text: e, duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: t, borderRadius: "5px", padding: "15px 25px" } }).showToast() } function r() { o("Ошибка", "linear-gradient(174deg, #a41e69c2, #1f1d23f7)") } s.forEach(function (e) { e.addEventListener("focus", function () { let t = e.previousElementSibling; t.style.top = "-20px", t.style.transform = "translateY(-50%) scale(0.9)", t.style.color = "#fff", t.style.fontSize = "1rem" }), e.addEventListener("blur", function () { if ("" === e.value) { let t = e.previousElementSibling; t.style.top = "50%", t.style.transform = "translateY(-50%) scale(1)", t.style.color = "#272733", t.style.fontSize = "1.125rem" } }) }), a.addEventListener("change", function () { if (a.files.length > 0) { let e = a.files[0]; "image/jpeg" === e.type && e.size <= 1048576 ? (o("Файл выбран", "linear-gradient(28deg, #256468, #10101dd6)"), l.disabled = !1) : (o("Допустим JPG (1 МБ)", "linear-gradient(174deg, #a41e69c2, #1f1d23f7)"), a.value = "", l.disabled = !0) } else o("Пожалуйста, выберите файл.", "linear-gradient(174deg, #a41e69c2, #1f1d23f7)"), l.disabled = !0 }), n.addEventListener("submit", function (e) { if (e.preventDefault(), d) return; d = !0, i.style.display = "flex", l.disabled = !0; let a = document.querySelector("#select .select-options__item.selected"); t = a ? a.getAttribute("data-value") : "choose"; let c = document.getElementById("email").value, f = document.getElementById("name").value, u = new FormData; u.append("type", t), u.append("email", c), u.append("name", f), fetch("https://jsonplaceholder.typicode.com/posts", { method: "POST", body: u }).then(function (e) { d = !1, i.style.display = "none", e.ok ? (o("Отправлено", "linear-gradient(28deg, #256468, #10101dd6)"), n.reset(), document.getElementById("email").value = "", document.getElementById("name").value = "", l.disabled = !1, s.forEach(function (e) { let t = e.previousElementSibling; t.style.top = "50%", t.style.transform = "translateY(-50%) scale(1)", t.style.color = "#272733", t.style.fontSize = "1.125rem" })) : (r(), l.disabled = !1) }).catch(function () { d = !1, i.style.display = "none", r(), l.disabled = !1 }) }) });