document.addEventListener("DOMContentLoaded", function () { let e = document.getElementById("form"), t = e.querySelector('button[type="submit"]'), n = document.getElementById("loader"), o = document.getElementById("file"), d = !1, l = document.querySelectorAll(".form-group__input"); function a(e, t) { Toastify({ text: e, duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: t, borderRadius: "5px", padding: "15px 25px" } }).showToast() } function i(e) { a(e, "linear-gradient(174deg, #a41e69c2, #1f1d23f7)") } l.forEach(function (e) { e.addEventListener("focus", () => { let t = e.previousElementSibling; t.style.top = "-20px", t.style.transform = "translateY(-50%) scale(0.9)", t.style.color = "#fff", t.style.fontSize = "1rem" }), e.addEventListener("blur", () => { if ("" === e.value) { let t = e.previousElementSibling; t.style.top = "50%", t.style.transform = "translateY(-50%) scale(1)", t.style.color = "#272733", t.style.fontSize = "1.125rem" } }) }), o.addEventListener("change", function () { if (o.files.length > 0) { let e = o.files[0]; "image/jpeg" === e.type && e.size <= 1048576 ? (a("Файл выбран", "linear-gradient(28deg, #256468, #10101dd6)"), t.disabled = !1) : (i("Допустим JPG (1 МБ)"), o.value = "", t.disabled = !0) } else i("Пожалуйста, выберите файл."), t.disabled = !0 }), e.addEventListener("submit", function (o) { if (o.preventDefault(), d) return; d = !0, n.style.display = "none", t.disabled = !0, n.style.display = "flex"; let a = document.querySelector(".select-options__item.selected"), i = a ? a.getAttribute("data-value") : "choose", s = document.getElementById("email").value, r = document.getElementById("name").value, u = new FormData; u.append("type", i), u.append("email", s), u.append("name", r), fetch("https://jsonplaceholder.typicode.com/posts", { method: "POST", body: u }).then(e => e.json()).then(() => { n.style.display = "none", Toastify({ text: "Отправлено", duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(28deg, #256468, #10101dd6)", borderRadius: "5px", padding: "15px 25px" } }).showToast(), e.reset(), document.getElementById("email").value = "", document.getElementById("name").value = "", d = !1, t.disabled = !1, l.forEach(e => { let t = e.previousElementSibling; t.style.top = "50%", t.style.transform = "translateY(-50%) scale(1)", t.style.color = "#272733", t.style.fontSize = "1.125rem" }) }).catch(() => { d = !1, n.style.display = "none", t.disabled = !1, Toastify({ text: "Ошибка", duration: 3e3, newWindow: !0, gravity: "top", position: "right", stopOnFocus: !0, style: { background: "linear-gradient(174deg, #a41e69c2, #1f1d23f7)", borderRadius: "5px", padding: "15px 25px" } }).showToast() }) }) });